<html>
  <head>
    <link rel="stylesheet" href="./xterm.css" />
    <script src="./xterm.js"></script>
    <title>Command Prompt</title>
  </head>
  <body>
    <div id="terminal"></div>
    <script>
      var cmds = {
        "test": function () {
          window.alert("Test complete");
        }
      }
      var term = new Terminal();
      var command = "";
      term.open(document.getElementById("terminal"));
      term.write("webuser@localhost $ ");
      term.onData(function (data) {
        if (data == "\r") {
          try {
            cmds[command]();
          } catch(ReferenceError) {
            term.write(`\r\nCommand '${command}' not found!`);
          }
          term.write("\r\nwebuser@localhost $ ");
          command = "";
        } else if (data == "\u007F") {
          if (term._core.buffer.x > 20) {
            term.write("\b \b");
            if (command.length > 0) {
              command = command.substr(0, command.length - 1);
            }
          }
        } else {
          term.write(data);
          command += data;
        }
      });
    </script>
  </body>
</html>
